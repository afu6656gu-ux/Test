<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø±Ø¨ ÙÙ„ÙŠÙƒØ³ - Ù…Ø´Ø§Ù‡Ø¯Ø© ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for Streaming -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts - Cairo -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom Styles */
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Cairo', sans-serif;
        }
        
        /* Custom scrollbar for better dark mode aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e1e1e;
        }
        ::-webkit-scrollbar-thumb {
            background: #f59e0b;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #d97706;
        }

        /* Slider transitions */
        .slider-item {
            transition: opacity 1s ease-in-out;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .details-backdrop {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .details-backdrop::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(18, 18, 18, 0.85);
            backdrop-filter: blur(8px);
        }
        .episode-list::-webkit-scrollbar-thumb {
            background: #4a4a4a;
        }
        .episode-list::-webkit-scrollbar-thumb:hover {
            background: #6a6a6a;
        }

        /* Animation for cards */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-animate {
            animation: fadeIn 0.5s ease-out forwards;
            opacity: 0; /* Start hidden */
        }
        
        /* Details page transition */
        .page-overlay {
            transition: opacity 0.3s ease-in-out;
        }

        /* --- Aurora Hover Effect on Cards --- */
        .aurora-card {
            position: relative;
            overflow: hidden;
            border: 1px solid #2d2d2d;
        }
        .aurora-card::before {
            content: '';
            position: absolute;
            top: var(--y, 0);
            left: var(--x, 0);
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            background-image: radial-gradient(circle, rgba(245, 158, 11, 0.25), transparent 80%);
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none; /* Make sure it doesn't block clicks */
        }
        .aurora-card:hover::before {
            opacity: 1;
        }
        .mood-selector button.active {
            background-color: #f59e0b;
            color: black;
            font-weight: bold;
        }
    </style>
</head>
<body class="antialiased bg-[#121212] text-slate-200">

    <!-- Main Application Container -->
    <div id="app" class="min-h-screen">
        
        <!-- Header -->
        <header class="bg-[#1e1e1e] sticky top-0 z-50 shadow-black/20 border-b border-[#2d2d2d]">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center relative">
                <!-- Logo and Nav -->
                <div class="flex items-center gap-3 sm:gap-6">
                    <a href="#" onclick="goHome(event)" class="cursor-pointer flex items-center gap-3 group">
                           <div class="w-10 h-10 flex items-center justify-center transition-transform duration-300 group-hover:scale-110">
                              <svg class="w-10 h-10 text-amber-500" viewBox="0 0 24 24" fill="currentColor">
                                     <path d="M12,2A10,10 0 1,0 22,12A10,10 0 0,0 12,2M10,16.5V7.5L16,12L10,16.5Z" />
                              </svg>
                          </div>
                        <h1 class="text-xl sm:text-2xl font-bold text-amber-500">Ø¹Ø±Ø¨ ÙÙ„ÙŠÙƒØ³</h1>
                    </a>
                    <nav class="hidden md:flex items-center gap-4">
                        <a href="#movies" onclick="smoothScrollTo('#movies', event)" class="text-gray-300 hover:text-amber-500 transition duration-300">Ø£ÙÙ„Ø§Ù…</a>
                        <a href="#series" onclick="smoothScrollTo('#series', event)" class="text-gray-300 hover:text-amber-500 transition duration-300">Ù…Ø³Ù„Ø³Ù„Ø§Øª</a>
                    </nav>
                </div>

                <div class="flex items-center gap-4">
                    <!-- Search Bar -->
                    <div class="hidden sm:flex items-center gap-2 bg-[#121212] border border-[#2d2d2d] rounded-full px-3 py-1.5 w-full max-w-xs">
                        <i class="fa fa-search text-gray-500"></i>
                        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù… Ø£Ùˆ Ù…Ø³Ù„Ø³Ù„..." class="bg-transparent focus:outline-none w-full text-slate-200 placeholder:text-gray-500">
                    </div>
                     <!-- Surprise Me Button -->
                    <button onclick="showRandomSuggestion()" class="hidden sm:flex items-center gap-2 bg-amber-500 text-black rounded-full px-4 py-1.5 hover:bg-amber-600 transition transform hover:scale-105" title="Ø§Ù‚ØªØ±Ø§Ø­ Ø¹Ø´ÙˆØ§Ø¦ÙŠ">
                        <i class="fa-solid fa-wand-magic-sparkles"></i>
                        <span class="hidden lg:block">ÙØ§Ø¬Ø¦Ù†ÙŠ!</span>
                    </button>
                    <!-- User ID Display -->
                    <div id="user-id-display" class="hidden md:block text-xs text-gray-400"></div>
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" class="md:hidden text-2xl text-gray-300">
                        <i class="fa fa-bars"></i>
                    </button>
                </div>
                   <!-- Mobile Menu -->
                <div id="mobile-menu" class="hidden md:hidden bg-[#1e1e1e] absolute top-full right-0 left-0 border-t border-[#2d2d2d]">
                    <nav class="flex flex-col p-4 gap-4">
                        <a href="#" onclick="goHome(event); closeMobileMenu();" class="text-gray-300 hover:text-amber-500 transition duration-300">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                        <a href="#movies" onclick="smoothScrollTo('#movies', event); closeMobileMenu();" class="text-gray-300 hover:text-amber-500 transition duration-300">Ø£ÙÙ„Ø§Ù…</a>
                        <a href="#series" onclick="smoothScrollTo('#series', event); closeMobileMenu();" class="text-gray-300 hover:text-amber-500 transition duration-300">Ù…Ø³Ù„Ø³Ù„Ø§Øª</a>
                        <a href="#" onclick="showRandomSuggestion(); closeMobileMenu();" class="text-gray-300 hover:text-amber-500 transition duration-300"><i class="fa-solid fa-wand-magic-sparkles ml-2"></i> ÙØ§Ø¬Ø¦Ù†ÙŠ!</a>
                    </nav>
                </div>
            </div>
        </header>
        
        <!-- Construction Banner -->
        <div id="construction-banner" class="bg-amber-500 text-black text-center p-2 relative text-sm sm:text-base">
            <p>
                <i class="fa-solid fa-triangle-exclamation mx-2"></i>
                <strong>ØªÙ†Ø¨ÙŠÙ‡:</strong> Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªØ­Øª Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ¬Ø±Ø¨Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø·.
            </p>
            <button id="close-banner-btn" class="absolute top-1/2 -translate-y-1/2 left-4 text-xl hover:text-black/70 transition-colors">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>


        <!-- Main Content Area -->
        <main id="main-content" class="container mx-auto px-4 py-8">
            
            <!-- Hero Slider -->
            <section id="slider-container" class="relative w-full h-56 md:h-72 lg:h-96 rounded-2xl overflow-hidden shadow-2xl shadow-black/30 mb-10">
                <!-- Slider items will be injected here by JS -->
            </section>

              <!-- Mood Selector Section -->
            <section id="mood-selector" class="mb-10">
                <h2 class="text-2xl font-bold border-r-4 border-amber-500 pr-4 mb-6">Ø§Ø®ØªØ± Ø­Ø³Ø¨ Ø­Ø§Ù„ØªÙƒ Ø§Ù„Ù…Ø²Ø§Ø¬ÙŠØ©</h2>
                <div class="mood-selector flex flex-wrap gap-3">
                    <button data-genre="all" class="active bg-[#1e1e1e] border border-[#2d2d2d] py-2 px-5 rounded-full hover:bg-amber-500 hover:text-black transition transform hover:scale-105">Ø§Ù„ÙƒÙ„</button>
                    <button data-genre="ÙƒÙˆÙ…ÙŠØ¯ÙŠ" class="bg-[#1e1e1e] border border-[#2d2d2d] py-2 px-5 rounded-full hover:bg-amber-500 hover:text-black transition transform hover:scale-105">ğŸ˜‚ Ù…Ø­ØªØ§Ø¬ Ø£Ø¶Ø­Ùƒ</button>
                    <button data-genre="Ø£ÙƒØ´Ù†" class="bg-[#1e1e1e] border border-[#2d2d2d] py-2 px-5 rounded-full hover:bg-amber-500 hover:text-black transition transform hover:scale-105">ğŸ”¥ Ø³Ù‡Ø±Ø© Ø£ÙƒØ´Ù†</button>
                    <button data-genre="Ø¬Ø±ÙŠÙ…Ø©" class="bg-[#1e1e1e] border border-[#2d2d2d] py-2 px-5 rounded-full hover:bg-amber-500 hover:text-black transition transform hover:scale-105">ğŸ•µï¸â€â™‚ï¸ ØºÙ…ÙˆØ¶ ÙˆØªØ´ÙˆÙŠÙ‚</button>
                    <button data-genre="Ø¯Ø±Ø§Ù…Ø§" class="bg-[#1e1e1e] border border-[#2d2d2d] py-2 px-5 rounded-full hover:bg-amber-500 hover:text-black transition transform hover:scale-105">ğŸ˜¢ Ø¬Ø±Ø¹Ø© Ø¯Ø±Ø§Ù…Ø§</button>
                </div>
            </section>
            
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Content Grid -->
                <div class="w-full lg:w-3/4">
                    <!-- Movies Section -->
                    <section id="movies" class="mb-10">
                        <h2 class="text-2xl font-bold border-r-4 border-amber-500 pr-4 mb-6">Ø£Ø­Ø¯Ø« Ø§Ù„Ø£ÙÙ„Ø§Ù…</h2>
                        <div id="movies-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-x-4 gap-y-6">
                            <!-- Movie cards will be injected here by JS -->
                        </div>
                    </section>
                    <!-- Series Section -->
                    <section id="series" class="mb-10">
                        <h2 class="text-2xl font-bold border-r-4 border-amber-500 pr-4 mb-6">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</h2>
                        <div id="series-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-x-4 gap-y-6">
                            <!-- Series cards will be injected here by JS -->
                        </div>
                    </section>
                </div>
                
                <!-- Sidebar -->
                <aside class="w-full lg:w-1/4">
                    <div class="bg-[#1e1e1e] p-4 rounded-lg sticky top-24 border border-[#2d2d2d]">
                        <h3 class="text-xl font-bold border-r-4 border-amber-500 pr-4 mb-4">Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</h3>
                        <div id="top-rated-list" class="space-y-4">
                            <!-- Top rated items will be injected here by JS -->
                        </div>
                    </div>
                </aside>
            </div>
        </main>

        <!-- Details Page Overlay -->
        <div id="details-page" class="page-overlay hidden opacity-0 pointer-events-none fixed inset-0 z-[60] overflow-y-auto">
            <!-- Details content will be injected here by JS -->
        </div>
        
        <!-- Static Page Overlay -->
        <div id="static-page" class="page-overlay hidden opacity-0 pointer-events-none fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black bg-opacity-70 backdrop-blur-sm">
            <!-- Static page content will be injected here by JS -->
        </div>


        <!-- Footer -->
        <footer class="bg-[#1e1e1e] border-t border-[#2d2d2d] mt-12 py-8">
            <div class="container mx-auto px-4 text-center text-gray-400">
                <div class="flex justify-center gap-6 mb-4">
                    <a href="#" onclick="showStaticPage('policy', event)" class="hover:text-amber-500 transition">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</a>
                    <a href="#" onclick="showStaticPage('contact', event)" class="hover:text-amber-500 transition">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a>
                    <a href="#" onclick="showStaticPage('about', event)" class="hover:text-amber-500 transition">Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
                </div>
                <div class="flex justify-center gap-6 mb-4 text-2xl">
                    <a href="https://www.facebook.com/share/174qjXU6fe/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-amber-500 transition"><i class="fa-brands fa-facebook"></i></a>
                </div>
                <p>&copy; 2025 Ø¹Ø±Ø¨ ÙÙ„ÙŠÙƒØ³. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
            </div>
        </footer>
    </div>
    
    <!-- Notification/Toast -->
    <div id="notification" class="fixed bottom-5 right-5 bg-amber-500 text-black font-bold py-3 px-6 rounded-lg shadow-lg opacity-0 transform translate-y-10 transition-all duration-500 z-[100]">
        <p id="notification-message"></p>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, query, setDoc, doc, writeBatch, setLogLevel } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Firebase global variables (provided by Canvas environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let app;
        let db;
        let auth;
        let userId = 'anonymous'; // Default to anonymous
        let isAuthReady = false;
        let hlsInstance = null; // To keep track of HLS instance

        // --- DATA WILL BE LOADED FROM FIRESTORE ---
        const SCRIPT_DATA_VERSION = '4.3'; // Updated movie info
        const initialData = [
            { id: 1, type: 'movie', title: 'ÙˆÙ„Ø§Ø¯ Ø±Ø²Ù‚ 3: Ø§Ù„Ù‚Ø§Ø¶ÙŠØ©', year: 2024, genre: 'Ø£ÙƒØ´Ù†, Ø¬Ø±ÙŠÙ…Ø©', poster: 'https://i.postimg.cc/Lsph0Zc5/Welad-Rizk-3-El-Qadia.jpg', rating: 7.8, description: 'Ø¨Ø¹Ø¯ Ù…Ø±ÙˆØ± Ø³Ù†ÙˆØ§Øª ÙˆØ§Ù†ÙØµØ§Ù„ Ø§Ù„Ø£Ø®ÙˆØ© ÙÙŠ Ø·Ø±Ù‚Ù‡Ù… Ø§Ù„Ø­ÙŠØ§ØªÙŠØ© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©ØŒ ÙŠØ¹ÙˆØ¯ Ø´Ø¨Ø­ Ù…Ù† Ø§Ù„Ù…Ø§Ø¶ÙŠ Ù„ÙŠÙ„Ù‚ÙŠ Ø¨Ø¸Ù„Ø§Ù„Ù‡ Ø¹Ù„Ù‰ ÙˆÙ„Ø§Ø¯ Ø±Ø²Ù‚ØŒ Ù…Ù…Ø§ ÙŠØ¬Ø¨Ø±Ù‡Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø­ÙŠØ§Ø© Ø§Ù„Ø¬Ø±ÙŠÙ…Ø© ÙˆØ§Ù„Ø³Ø±Ù‚Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.', videoSrc: 'https://www.youtube.com/watch?v=8cawCGKqEi0', externalWatchLink: 'https://ddyops01h.dls4all.online/d/2aqpocnsfsrnuwfu2z6ijzhsvvp3lqy3egmjbnn2dwnrmxyf4532aak46rjvyj7lo7eqrpod/video.mp4', ai_critic_quote: 'Ø¹ÙˆØ¯Ø© Ø·Ø§Ù„ Ø§Ù†ØªØ¸Ø§Ø±Ù‡Ø§ Ø¨Ø¬Ø±Ø¹Ø© Ø£ÙƒØ´Ù† ÙˆÙ…Ø®Ø§Ø·Ø± ØªØµÙ„ Ø¥Ù„Ù‰ Ø¹Ù†Ø§Ù† Ø§Ù„Ø³Ù…Ø§Ø¡. Ù‡Ù„ ØªÙ†Ø¬Ø­ Ø§Ù„Ø£Ø³ÙˆØ¯ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¹Ø±ÙŠÙ†Ù‡Ø§ØŸ' },
            { id: 23, type: 'movie', title: 'Ø§Ù„Ø­Ø±ÙŠÙØ©', year: 2024, genre: 'Ø¯Ø±Ø§Ù…Ø§, Ø±ÙŠØ§Ø¶Ø©', poster: 'https://i.postimg.cc/Px87g548/u-Nd-AFjr0gz-L4-Na-Jw1lpg-W5-On0-FM-533x800.webp', rating: 7.5, description: 'Ø¨Ø¹Ø¯ Ø£Ù† ØªØªØ³Ø¨Ø¨ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù†ØªÙ‚Ø§Ù„Ù‡ Ù…Ù† Ù…Ø¯Ø±Ø³Ø© Ø®Ø§ØµØ© Ø¥Ù„Ù‰ Ù…Ø¯Ø±Ø³Ø© Ø­ÙƒÙˆÙ…ÙŠØ©ØŒ ÙŠÙƒØªØ´Ù Ù…Ø§Ø¬Ø¯ Ù…ÙˆÙ‡Ø¨ØªÙ‡ ÙÙŠ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… ÙˆÙŠÙ†Ø¶Ù… Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø¹Ù„Ù‰ Ø£Ù…Ù„ Ø§Ù„ÙÙˆØ² Ø¨Ø§Ù„Ø¨Ø·ÙˆÙ„Ø©.', videoSrc: 'https://www.youtube.com/watch?v=FLePppoP-34', externalWatchLink: 'https://fhd20a15.dls4all.online/d/2qqeinfsfsrnuwfu2v6i5p54w6nlig3cl3mud3nn73m5xig5damzvcgdyg4xxsnvksoxsgvl/video.mp4', ai_critic_quote: 'ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… ÙÙŠ Ø§Ù„Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…ØµØ±ÙŠ ÙƒÙ…Ø§ Ù„Ù… ØªØ±Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„. ÙÙŠÙ„Ù… Ø¹Ù† Ø§Ù„Ø£Ø­Ù„Ø§Ù… ÙˆØ§Ù„ØµØ¯Ø§Ù‚Ø© ÙÙŠ Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØµØ¹Ø§Ø¨.' },
            { id: 17, type: 'movie', title: 'Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø¹ Ø§Ù„Ø¹ÙŠØ§Ù„', year: 2024, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ', poster: 'https://i.postimg.cc/wMrDtcwF/image.jpg', rating: 7.5, description: 'ÙÙŠ Ø¥Ø·Ø§Ø± Ù…Ù† Ø§Ù„ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ØŒ ÙŠÙÙƒÙ„Ù Ù…Ø¹Ù„Ù… ØªØ§Ø±ÙŠØ® Ø¨Ø§Ù„ØªØ¯Ø±ÙŠØ³ ÙÙŠ Ø¥Ø­Ø¯Ù‰ Ø§Ù„Ù…Ø¯Ø§Ø±Ø³ Ø¨Ù…Ù†Ø·Ù‚Ø© ØµØ­Ø±Ø§ÙˆÙŠØ©ØŒ ÙÙŠÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø§Ù„ØªÙŠ Ù„Ù… ØªÙƒÙ† ÙÙŠ Ø§Ù„Ø­Ø³Ø¨Ø§Ù†.', videoSrc: 'https://www.youtube.com/watch?v=nxOkDx65Otk', externalWatchLink: 'https://fhd20b1.dls4all.online/d/4aqann5tfsrnuwfu3n6nhzpr7gjsq7c6dluvx3c4e3z2fwtzsvgbe2sefe4ifmtcinaqmvnp/video.mp4', ai_critic_quote: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ù…Ù† Ù‚Ù„Ø¨ Ø§Ù„ØµØ­Ø±Ø§Ø¡ØŒ Ø­ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ ÙŠÙ„ØªÙ‚ÙŠØ§Ù† ÙÙŠ Ù…ÙˆØ§Ù‚Ù Ù„Ø§ ØªÙÙ†Ø³Ù‰. Ø¶Ø­Ùƒ Ù…Ø¶Ù…ÙˆÙ†!'},
            { id: 18, type: 'movie', title: 'Ø£Ù‡Ù„ Ø§Ù„ÙƒÙ‡Ù', year: 2024, genre: 'Ø£ÙƒØ´Ù†, ØªØ§Ø±ÙŠØ®ÙŠ', poster: 'https://i.postimg.cc/d1L2JxBD/x-Iiv-Uefce-D30w-Iy-ZAK1z55-SBv-TT-533x800.webp', rating: 7.9, description: 'ÙÙŠ Ø¹Ø§Ù… 250 Ù…ÙŠÙ„Ø§Ø¯ÙŠØ©ØŒ ÙŠÙØ± Ø«Ù„Ø§Ø«Ø© Ù…Ù† Ø§Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† Ù…Ù† Ø¨Ø·Ø´ Ø§Ù„Ø­Ø§ÙƒÙ… Ø§Ù„Ø±ÙˆÙ…Ø§Ù†ÙŠØŒ ÙˆÙŠÙ„Ø¬Ø£ÙˆÙ† Ø¥Ù„Ù‰ ÙƒÙ‡Ù Ù…Ù‡Ø¬ÙˆØ±ØŒ Ø­ÙŠØ« ÙŠÙ†Ø§Ù…ÙˆÙ† Ù„Ù…Ø¯Ø© 309 Ø³Ù†ÙˆØ§Øª Ø«Ù… ÙŠØ³ØªÙŠÙ‚Ø¸ÙˆÙ† ÙÙŠ Ø²Ù…Ù† Ø¢Ø®Ø±.', videoSrc: 'https://www.youtube.com/watch?v=3CRDpyAIkyI', externalWatchLink: 'https://ddy35s65h.dls4all.online/d/3yqmt3ftfsrnuwfu3f6jh3xbuo5kmc2jtssit2kak4cfqaj7w6rxraf6pyp2laxpcn4n3bhe/video.mp4', ai_critic_quote: 'Ø£Ø³Ø·ÙˆØ±Ø© ØªØªØ¬Ø³Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø©. ØµØ±Ø§Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† ÙˆØ§Ù„Ø·ØºÙŠØ§Ù† ÙÙŠ Ø±Ø­Ù„Ø© Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù†.' },
            { id: 21, type: 'movie', title: 'Ø´Ù‚Ùˆ', year: 2024, genre: 'Ø£ÙƒØ´Ù†, ØªØ´ÙˆÙŠÙ‚', poster: 'https://i.postimg.cc/nVmFN1Jk/images-1.jpg', rating: 7.6, description: 'Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ Ø®Ø§Ø±Ø¬ÙˆÙ† Ø¹Ù† Ø§Ù„Ù‚Ø§Ù†ÙˆÙ† ÙŠÙ…Ø§Ø±Ø³ÙˆÙ† Ø£Ø¹Ù…Ø§Ù„Ø§Ù‹ Ø¥Ø¬Ø±Ø§Ù…ÙŠØ© Ù…Ø´Ø¨ÙˆÙ‡Ø©ØŒ Ù„ÙƒÙ†Ù‡Ø§ ØªÙ‚ÙˆØ¯Ù‡Ù… Ø¥Ù„Ù‰ Ø£Ø²Ù…Ø§Øª ÙƒØ¨ÙŠØ±Ø© ÙˆØªØ­Ø¯Ø« ÙˆØ±Ø§Ø¡Ù‡Ø§ ØªØ¨Ø¹Ø§Øª Ø®Ø·ÙŠØ±Ø©.', videoSrc: 'https://www.youtube.com/watch?v=bzOr9-9bj6g', externalWatchLink: 'https://fhd20b1.dls4all.online/d/4aqfdfvtfsrnuwfu3v6nf2hwuv5fm2gk6kn6afkwzjlja4uq4jgswdljbropubwbks7ybsir/video.mp4', ai_critic_quote: 'Ø¹Ù†Ø¯Ù…Ø§ ØªØ¬ØªÙ…Ø¹ Ø§Ù„ØµØ¯Ø§Ù‚Ø© Ù…Ø¹ Ø¹Ø§Ù„Ù… Ø§Ù„Ø¬Ø±ÙŠÙ…Ø©ØŒ ØªÙƒÙˆÙ† Ø§Ù„Ø¹ÙˆØ§Ù‚Ø¨ ÙˆØ®ÙŠÙ…Ø©. ÙÙŠÙ„Ù… ÙŠØ­Ø¨Ø³ Ø§Ù„Ø£Ù†ÙØ§Ø³.'},
            { id: 30, type: 'movie', title: 'Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§ÙƒØ³', year: 2025, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ', poster: 'https://i.postimg.cc/R0Y3WzYM/anuo-OC2-JRa-Bq5-Ea-Wrf9-X48n-DE5-A-scaled-533x800.webp', rating: 7.2, description: 'Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡ ÙŠÙ‚Ø±Ø±ÙˆÙ† Ø¥Ù‚Ø§Ù…Ø© Ø­ÙÙ„Ø© ØµØ§Ø®Ø¨Ø©ØŒ Ù„ÙƒÙ† Ø§Ù„Ø£Ù…ÙˆØ± ØªØ®Ø±Ø¬ Ø¹Ù† Ø§Ù„Ø³ÙŠØ·Ø±Ø© ØªÙ…Ø§Ù…Ù‹Ø§ ÙˆØªØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ ÙÙˆØ¶Ù‰ Ø¹Ø§Ø±Ù…Ø©.', videoSrc: 'https://www.youtube.com/watch?v=c_i2iha_4-I', externalWatchLink: 'https://fhd2k202.dls4all.online/d/7uqa3entfsrnuwfu3v6nh2phxyqgcmlsg2bkxkvemebzguh432xo3vg2j63dtrza4punbxy2/video.mp4', ai_critic_quote: 'Ø­ÙÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙƒØ§Ù†Øª ÙƒÙÙŠÙ„Ø© Ø¨ØªØºÙŠÙŠØ± ÙƒÙ„ Ø´ÙŠØ¡. ÙÙŠÙ„Ù… Ø¹Ù† ØµØ¯Ø§Ù‚Ø© ÙˆØ¬Ù†ÙˆÙ† Ø´Ø¨Ø§Ø¨ÙŠ ÙŠØµÙ„ Ø¥Ù„Ù‰ Ø£Ù‚ØµÙ‰ Ø­Ø¯ÙˆØ¯Ù‡.'},
            { id: 22, type: 'series', title: 'Ø£Ø´ØºØ§Ù„ Ø´Ù‚Ø©', year: 2024, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ', poster: 'https://i.postimg.cc/MTSwSCxm/scaled-600x800.webp', rating: 8.0, description: 'ÙŠÙØ±Ø²Ù‚ Ø·Ø¨ÙŠØ¨ Ø´Ø±Ø¹ÙŠ ÙˆØ²ÙˆØ¬ØªÙ‡ Ø§Ù„Ù…Ø°ÙŠØ¹Ø© Ø¨ØªÙˆØ£Ù… Ø¨Ø¹Ø¯ ÙØªØ±Ø© Ù…Ù† Ø¹Ø¯Ù… Ø§Ù„Ø¥Ù†Ø¬Ø§Ø¨ØŒ ÙˆÙŠÙ‚Ø±Ø±Ø§Ù† Ø§Ù„Ø§Ø³ØªØ¹Ø§Ù†Ø© Ø¨Ù…Ø¯ÙŠØ±Ø© Ù…Ù†Ø²Ù„ Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø·ÙÙ„ÙŠÙ†ØŒ ÙˆÙ„ÙƒÙ†Ù‡Ù…Ø§ ÙŠØ¹Ø§Ù†ÙŠØ§Ù† Ø¨Ø´Ø¯Ø© ÙÙŠ Ø±Ø­Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù†Ø§Ø³Ø¨Ø©.', videoSrc: 'https://www.youtube.com/watch?v=wkeFEg0Tlwc', episodes: Array.from({length: 15}, (_, i) => ({ number: i + 1, videoSrc: 'https://www.youtube.com/watch?v=wkeFEg0Tlwc' })), ai_critic_quote: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ø¹Ø§Ø¦Ù„ÙŠØ© Ù…Ù† Ù†ÙˆØ¹ Ø¢Ø®Ø±! Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙˆØ¶Ù‰ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ØªØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ ÙÙ† Ù…Ø¶Ø­Ùƒ.' },
            { id: 26, type: 'series', title: 'Ø¨Ø§Ù„Ø·Ùˆ', year: 2023, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ', poster: 'https://i.postimg.cc/vZfcZrmY/11675252737718-e1676444599414-625x800.webp', rating: 8.6, description: 'Ø·Ø¨ÙŠØ¨ Ø´Ø§Ø¨ Ø­Ø¯ÙŠØ« Ø§Ù„ØªØ®Ø±Ø¬ ÙŠÙÙƒÙ„Ù Ø¨Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ ÙˆØ­Ø¯Ø© ØµØ­ÙŠØ© Ø¨Ù‚Ø±ÙŠØ© Ù†Ø§Ø¦ÙŠØ©ØŒ ÙˆÙ‡Ù†Ø§Ùƒ ÙŠØ¬Ø¯ Ù†ÙØ³Ù‡ ÙØ¬Ø£Ø© Ù…Ø¯ÙŠØ±Ù‹Ø§ Ù„Ù„ÙˆØ­Ø¯Ø© ÙˆÙ…Ø³Ø¤ÙˆÙ„Ø§Ù‹ Ø¹Ù† ÙƒÙ„ Ø´ÙŠØ¡ØŒ Ù…Ù…Ø§ ÙŠÙˆÙ‚Ø¹Ù‡ ÙÙŠ Ù…ÙˆØ§Ù‚Ù ÙƒÙˆÙ…ÙŠØ¯ÙŠØ© Ù„Ø§ Ø­ØµØ± Ù„Ù‡Ø§.', videoSrc: 'https://www.youtube.com/watch?v=B1-2Aay0A24', episodes: Array.from({length: 10}, (_, i) => ({ number: i + 1, videoSrc: 'https://www.youtube.com/watch?v=B1-2Aay0A24' })), ai_critic_quote: 'Ø¬Ø±Ø¹Ø© Ù…Ù† Ø§Ù„ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© Ù…Ù† Ù‚Ù„Ø¨ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØµØ­ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ©. Ù…Ø³Ù„Ø³Ù„ ÙŠØ¬Ø¹Ù„Ùƒ ØªØ¶Ø­Ùƒ Ø¹Ù„Ù‰ Ù…Ø¢Ø³ÙŠ Ø¨Ø·Ù„Ù‡Ø§ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ø´Ø§Ø¨.' },
            { id: 5, type: 'series', title: 'Ø³ÙØ§Ø­ Ø§Ù„Ø¬ÙŠØ²Ø©', year: 2023, genre: 'Ø¬Ø±ÙŠÙ…Ø©, Ø¥Ø«Ø§Ø±Ø©', poster: 'https://i.postimg.cc/k4vmXTg3/Poster-The-Serial-Killer-540x800.webp', rating: 7.9, description: 'Ù…Ø³Ù„Ø³Ù„ Ù…Ø³ØªÙˆØ­Ù‰ Ù…Ù† Ø£Ø­Ø¯Ø§Ø« Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ ÙŠØ¯ÙˆØ± Ø­ÙˆÙ„ Ù‚ØµØ© Ø³ÙØ§Ø­ ØºØ§Ù…Ø¶ ÙŠØ±ØªÙƒØ¨ Ø³Ù„Ø³Ù„Ø© Ù…Ù† Ø§Ù„Ø¬Ø±Ø§Ø¦Ù… Ø§Ù„Ù…Ø±ÙˆØ¹Ø©.', videoSrc: 'https://www.youtube.com/watch?v=aFGDL4d2pS8', episodes: [
                { number: 1, videoSrc: 'https://ddy35s65h.dls4all.online/d/3yqd5h5sfsrnuwfu5z6j5pnquyr2kbiuupht3fupgeykc55lemfhijgcenesjdva42j2vc5l/video.mp4' },
                { number: 2, videoSrc: 'https://ddy35s62h.dls4all.online/d/yaqhlefsfsrnuwfu5z6jf75s7fge6lja4da7wr65yo52pqubqgkeyro7bflqkzgdijay5ss3/video.mp4' },
                { number: 3, videoSrc: 'https://ddyops01h.dls4all.online/d/2aqelevsfsrnuwfu5z6i53hlxxncbrf2ltggddfhlxjb6pswcdkssovclclwuy5ob6d6wovl/video.mp4' },
                { number: 4, videoSrc: 'https://ddy35s62h.dls4all.online/d/yaqejevsfsrnuwfu5z6jd4f47lv3c7jtb75dg7s3trdzkzr3xtk74p2yd6zt4xoasjfl726p/video.mp4' },
                { number: 5, videoSrc: 'https://vsped-store2-fxa.cdnz.quest/hls2/01/00136/n2kpnhhxftme_n/index-v1-a1.m3u8?t=8xbdH8ggq6qwi9SotAu2WtS_jaDzgpvd1s8bl4204eg&s=1759020289&e=43200&v=172301&i=0.0&sp=0' },
                { number: 6, videoSrc: 'https://ddy35s65h.dls4all.online/d/3yqp5hfsfsrnuwfu5z6ir7767q5yqzotbrdhjzj535qacz26qdqob6sp25s2gr55irym2krt/video.mp4' },
                { number: 7, videoSrc: 'https://vsped-store2-fxa.cdnz.quest/hls2/02/00137/60knijeig5lq_l/index-v1-a1.m3u8?t=qshmYGy8SD1VCZ_4WRq7-J7szHXebCJaAbhYS2S-i3A&s=1759020492&e=43200&v=175575&i=0.0&sp=0' },
                { number: 8, videoSrc: 'https://vsped-store2-fxa.cdnz.quest/hls2/02/00137/hm9xrvrddbzd_l/index-v1-a1.m3u8?t=4SIzg3qCJ4xU3q3N5lQbR8CrJQZpk65yF5oQQejW8Ko&s=1759020529&e=43200&v=176155&i=0.0&sp=0' }
            ], ai_critic_quote: 'ÙˆØ¬Ù‡Ø§Ù† Ù„Ø¹Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø©: Ø§Ù„Ù‡Ø¯ÙˆØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ®ÙÙŠ Ø®Ù„ÙÙ‡ ÙˆØ­Ø´Ù‹Ø§. Ù…Ø³Ù„Ø³Ù„ Ø³ÙŠØ¬Ø¹Ù„Ùƒ ØªØ´Ùƒ ÙÙŠ ÙƒÙ„ Ù…Ù† Ø­ÙˆÙ„Ùƒ.'},
            { id: 27, type: 'movie', title: 'ÙˆØ´ ÙÙŠ ÙˆØ´', year: 2023, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ, Ø¯Ø±Ø§Ù…Ø§', poster: 'https://i.postimg.cc/rp2R1hHc/Wesh2-700x732.webp', rating: 7.7, description: 'ØªØ¯ÙˆØ± Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø¯Ø§Ø®Ù„ Ø´Ù‚Ø© Ø²ÙˆØ¬ÙŠØ©ØŒ Ø­ÙŠØ« ÙŠØ¬ØªÙ…Ø¹ Ø£ÙØ±Ø§Ø¯ Ø¹Ø§Ø¦Ù„ØªÙŠ Ø§Ù„Ø²ÙˆØ¬ ÙˆØ§Ù„Ø²ÙˆØ¬Ø© ÙÙŠ Ø´Ù‚Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø§Ù„ØµØ¯ÙØ©ØŒ ÙˆØªØ­Ø¯Ø« Ø¨ÙŠÙ†Ù‡Ù… Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø¨Ø³Ø¨Ø¨ Ø§Ù„Ø§Ø®ØªÙ„Ø§ÙØ§Øª Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©.', videoSrc: 'https://www.youtube.com/watch?v=D-h55g535aA', externalWatchLink: 'https://ddy35s65h.dls4all.online/d/3yqgwmnsfsrnuwfu2v6nfzfqu5iofqlrsdtehgd5gsblfufxytaxepe23mtgcohgoggwpz2z/video.mp4', ai_critic_quote: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ø°ÙƒÙŠØ© ØªØ­Ø¨Ø³ Ø§Ù„Ø¬Ù…ÙŠØ¹ ÙÙŠ Ø´Ù‚Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆØªØ·Ù„Ù‚ Ø§Ù„Ø¹Ù†Ø§Ù† Ù„Ù„ÙÙˆØ¶Ù‰. ÙÙŠÙ„Ù… ÙŠØ¹ÙƒØ³ Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ØµØ±ÙŠ Ø¨Ø±ÙˆØ­ Ù…Ù† Ø§Ù„Ø¯Ø¹Ø§Ø¨Ø©.'},
            { id: 24, type: 'movie', title: 'ÙÙˆÙŠ! ÙÙˆÙŠ! ÙÙˆÙŠ!', year: 2023, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ, Ø¯Ø±Ø§Ù…Ø§', poster: 'https://i.postimg.cc/wBRFvbmj/lz6mu2-Nz5-BICSf-LL0-Ih-Tcycfbc2-scaled_532x800.webp', rating: 8.2, description: 'Ø­Ø³Ù† Ø­Ø§Ø±Ø³ Ø£Ù…Ù† ÙŠØ¹ÙŠØ´ Ø­ÙŠØ§Ø© ÙÙ‚ÙŠØ±Ø©ØŒ ÙˆÙŠØ­Ù„Ù… Ø¨Ø§Ù„Ø³ÙØ± Ø¥Ù„Ù‰ Ø£ÙˆØ±ÙˆØ¨Ø§. ÙŠÙ†Ø¶Ù… Ø¨Ø§Ù„Ø®Ø¯Ø§Ø¹ Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚ ÙƒØ±Ø© Ù‚Ø¯Ù… Ù„Ù„Ù…ÙƒÙÙˆÙÙŠÙ† Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… ÙÙŠ Ø¨ÙˆÙ„Ù†Ø¯Ø§.', videoSrc: 'https://www.youtube.com/watch?v=s48L5tQ1L-g', externalWatchLink: 'https://fhd20a14.dls4all.online/d/2uqdkofsfsrnuwfu2v6jlopivnj342kp2mmoj2s5tvuzxqlrv7bbq6ewcptrz54c7hjo7t6l/video.mp4', ai_critic_quote: 'ØªØ­ÙØ© Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¶Ø­Ùƒ ÙˆØ§Ù„Ø¯Ù…ÙˆØ¹ØŒ ÙˆØªØ·Ø±Ø­ Ø£Ø³Ø¦Ù„Ø© Ø¹Ù…ÙŠÙ‚Ø© Ø­ÙˆÙ„ Ø§Ù„Ø£Ø­Ù„Ø§Ù… ÙˆØ§Ù„ÙØ±Øµ Ø§Ù„Ù…Ø³ØªØ­ÙŠÙ„Ø©.' },
            { id: 28, type: 'series', title: 'Ø¹Ù„Ù‰ Ø¨Ø§Ø¨ Ø§Ù„Ø¹Ù…Ø§Ø±Ø©', year: 2023, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ, Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ', poster: 'https://i.postimg.cc/wTt1S88q/2023-700x615.webp', rating: 7.9, description: 'Ø´Ø§Ø¨ ØµØ¹ÙŠØ¯ÙŠ Ø«Ø±ÙŠ ÙŠÙ‡Ø±Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© ÙˆÙŠØ¹Ù…Ù„ ÙƒØ¨ÙˆØ§Ø¨ Ø¹Ù…Ø§Ø±Ø© Ù‡Ø±Ø¨Ù‹Ø§ Ù…Ù† Ø§Ù„Ø«Ø£Ø±ØŒ ÙˆÙ‡Ù†Ø§Ùƒ ÙŠÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„ÙƒÙˆÙ…ÙŠØ¯ÙŠØ© Ù…Ø¹ Ø³ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ø§Ø±Ø© ØºØ±ÙŠØ¨ÙŠ Ø§Ù„Ø£Ø·ÙˆØ§Ø±.', videoSrc: 'https://www.youtube.com/watch?v=QfC_1E-iMVo', episodes: Array.from({length: 10}, (_, i) => ({ number: i + 1, videoSrc: 'https://www.youtube.com/watch?v=QfC_1E-iMVo' })), ai_critic_quote: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ø®ÙÙŠÙØ© Ø¹Ù† ØµØ±Ø§Ø¹ Ø§Ù„Ø«Ù‚Ø§ÙØ§Øª Ø¨ÙŠÙ† Ø³ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ø§Ø±Ø© ÙˆØ§Ù„Ø¨ÙˆØ§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ø§Ù„Ù‚Ø§Ø¯Ù… Ù…Ù† Ø§Ù„ØµØ¹ÙŠØ¯. Ù…Ø³Ù„Ø³Ù„ Ù…Ù…ØªØ¹.'},
            { id: 9, type: 'movie', title: 'ÙƒÙŠØ±Ø© ÙˆØ§Ù„Ø¬Ù†', year: 2022, genre: 'ØªØ§Ø±ÙŠØ®ÙŠ, Ø¯Ø±Ø§Ù…Ø§', poster: 'https://i.postimg.cc/dQG7GFLw/Poster-Keerah-Wel-Gen-540x800.webp', rating: 8.1, description: 'ÙŠØ±ØµØ¯ Ø§Ù„ÙÙŠÙ„Ù… Ø­Ù‚Ø¨Ø© Ù…Ù‡Ù…Ø© ÙÙŠ ØªØ§Ø±ÙŠØ® Ù…ØµØ± Ø£Ø«Ù†Ø§Ø¡ Ø«ÙˆØ±Ø© 1919ØŒ ÙˆÙŠØªÙ†Ø§ÙˆÙ„ ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…ØµØ±ÙŠ ÙÙŠ ÙØªØ±Ø© Ø§Ù„Ø§Ø­ØªÙ„Ø§Ù„ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ.', videoSrc: 'https://www.youtube.com/watch?v=igChw42zmP0', externalWatchLink: 'https://ddyops01h.dls4all.online/d/2aqlhp5sfsrnuwfu556ihzvtvft2vygyghg77l7wgqlipscwtgmkogsrtwmo2etrsqxgqun5/video.mp4', ai_critic_quote: 'Ù…Ù„Ø­Ù…Ø© ØªØ§Ø±ÙŠØ®ÙŠØ© Ø¹Ù† Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© ÙˆØ§Ù„ØµØ¯Ø§Ù‚Ø© ÙÙŠ Ù‚Ù„Ø¨ Ø«ÙˆØ±Ø© 1919. Ø¹Ù…Ù„ Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ Ù…ØªÙƒØ§Ù…Ù„.' },
            { id: 19, type: 'series', title: 'Ø§Ù„Ø¨ÙŠØª Ø¨ÙŠØªÙŠ', year: 2022, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ, Ø±Ø¹Ø¨', poster: 'https://i.postimg.cc/qvPQD0XQ/albait-baity-Poster2_ar-540x800.webp', rating: 8.3, description: 'ÙŠØ¬Ø¨Ø± Ø¨ÙŠÙ†Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ù…Ù† Ø£Ø¬Ù„ ØªØ³ÙˆÙŠØ© Ù…ÙŠØ±Ø§Ø«Ù‡ØŒ ÙˆÙ„ÙƒÙ† Ø³Ø±Ø¹Ø§Ù† Ù…Ø§ ÙŠØµØ§Ø¨ Ø¨Ø§Ù„ØµØ¯Ù…Ø© Ø¹Ù†Ø¯ Ù…Ø¹Ø±ÙØªÙ‡ Ø£Ù† Ù…Ø§ ÙŠØ±Ø«Ù‡ Ø³ÙŠØ¹Ø±Ø¶Ù‡ Ù„Ù„Ù…ØºØ§Ù…Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø¹Ø¨Ø©.', videoSrc: 'https://www.youtube.com/watch?v=W0yVSEe-eDY', episodes: Array.from({length: 10}, (_, i) => ({ number: i + 1, videoSrc: 'https://www.youtube.com/watch?v=W0yVSEe-eDY' })), ai_critic_quote: 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ„ØªÙ‚ÙŠ Ø§Ù„Ø±Ø¹Ø¨ Ø¨Ø§Ù„ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ ÙÙŠ Ù‚ØµØ± Ù…Ø³ÙƒÙˆÙ†. Ù‡Ù„ Ø³ØªØ¶Ø­Ùƒ Ø£Ù… Ø³ØªØ®Ø§ÙØŸ' },
            { id: 29, type: 'movie', title: 'Ø§Ù„Ù…Ø·Ø§Ø±ÙŠØ¯', year: 2023, genre: 'ÙƒÙˆÙ…ÙŠØ¯ÙŠ, Ø±ÙŠØ§Ø¶Ø©', poster: 'https://i.postimg.cc/4dBKTXx6/324253377_712761033732696_249607374389194024_n_596x800.webp', rating: 6.5, description: 'ÙŠØ¹ÙˆØ¯ ØµÙ„Ø§Ø­ Ù…Ù† Ø£Ù…Ø±ÙŠÙƒØ§ Ù„Ø¨ÙŠØ¹ Ù…Ù…ØªÙ„ÙƒØ§Øª ÙˆØ§Ù„Ø¯Ù‡ØŒ Ù„ÙƒÙ†Ù‡ ÙŠÙƒØªØ´Ù Ø£Ù†Ù‡ ÙˆØ±Ø« Ù†Ø§Ø¯ÙŠ ÙƒØ±Ø© Ù‚Ø¯Ù…ØŒ ÙÙŠÙ‚Ø±Ø± ØªÙƒÙˆÙŠÙ† ÙØ±ÙŠÙ‚ Ù…Ù† Ø£ØµØ¯Ù‚Ø§Ø¦Ù‡ Ø§Ù„Ù‚Ø¯Ø§Ù…Ù‰ Ù„Ø®ÙˆØ¶ Ù…ØºØ§Ù…Ø±Ø© ÙƒÙˆÙ…ÙŠØ¯ÙŠØ©.', videoSrc: 'https://www.youtube.com/watch?v=J_jKj-SAa-4', externalWatchLink: 'https://ddy35s65h.dls4all.online/d/3yqk5dfsfsrnuwfu2f6n577cxu3bpigf35z5wc2tnxrslw2jphmm2i2tnfpgldbpffuk5ttl/video.mp4', ai_critic_quote: 'Ø¹Ù†Ø¯Ù…Ø§ ØªØ¬ØªÙ…Ø¹ Ø§Ù„ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§ Ù…Ø¹ Ø´ØºÙ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…ØŒ ØªÙƒÙˆÙ† Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙØ±ÙŠÙ‚Ù‹Ø§ Ù„Ø§ ÙŠÙÙ‚Ù‡Ø±... ÙÙŠ Ø¥Ø«Ø§Ø±Ø© Ø§Ù„Ø¶Ø­Ùƒ!'},
            { id: 10, type: 'movie', title: 'Ø§Ù„ÙÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ù‚', year: 2014, genre: 'ØºÙ…ÙˆØ¶, Ø±Ø¹Ø¨', poster: 'https://i.postimg.cc/ry9V8wD0/5d4ebd021c2ef-185052-500x714.webp', rating: 8.0, description: 'Ø¨Ø¹Ø¯ 5 Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø¹Ø²Ù„Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©ØŒ ÙŠÙØ³ØªØ¯Ø¹Ù‰ Ø§Ù„Ø¯ÙƒØªÙˆØ± Ø§Ù„Ù†ÙØ³ÙŠ (ÙŠØ­ÙŠÙ‰) Ù„Ù„Ø¹Ù…Ù„ ÙÙŠ Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø¹Ø¨Ø§Ø³ÙŠØ©ØŒ Ø­ÙŠØ« ÙŠØ¬Ø¯ ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø±Ù‡ Ù…ÙØ§Ø¬Ø£Ø© Ø³ØªØºÙŠØ± Ø­ÙŠØ§ØªÙ‡.', videoSrc: 'https://www.youtube.com/watch?v=I5Bat3GPqGc', externalWatchLink: 'https://fhd20a14.dls4all.online/d/2uqdilvsfsrnuwfu2r6i5px6vzxizbjduchezhoxdm74ighky2fkmzikyqaiosnqz6ofn2y2/video.mp4', ai_critic_quote: 'Ø±Ø­Ù„Ø© ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø¬Ù†ÙˆÙ† ÙˆØ§Ù„Ù‡Ù„Ø§ÙˆØ³ Ø£ÙƒØ«Ø± Ù‚ØªØ§Ù…Ø© ÙˆØ¥Ø«Ø§Ø±Ø©. Ù„Ø§ ØªØ´Ø§Ù‡Ø¯Ù‡ ÙˆØ­ÙŠØ¯Ù‹Ø§.' }
        ];
        
        let realData = [];

        // --- DOM Elements ---
        const sliderContainer = document.getElementById('slider-container');
        const moviesGrid = document.getElementById('movies-grid');
        const seriesGrid = document.getElementById('series-grid');
        const topRatedList = document.getElementById('top-rated-list');
        const detailsPage = document.getElementById('details-page');
        const staticPage = document.getElementById('static-page');
        const searchInput = document.getElementById('searchInput');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notification-message');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const constructionBanner = document.getElementById('construction-banner');
        const closeBannerBtn = document.getElementById('close-banner-btn');
        const moodSelector = document.getElementById('mood-selector');
        const userIdDisplay = document.getElementById('user-id-display');

        let notificationTimeout;

        // --- FIREBASE INITIALIZATION AND AUTH ---
        if (Object.keys(firebaseConfig).length > 0) {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            setLogLevel('debug'); // Enable Firestore logging

            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    userId = user.uid;
                    isAuthReady = true;
                    userIdDisplay.textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹! ${userId.substring(0, 8)}...`;
                    
                    const lastSyncedVersion = localStorage.getItem('arabflexDataVersion');
                    if (lastSyncedVersion !== SCRIPT_DATA_VERSION) {
                        await syncDataWithFirestore();
                    }
                    setupOnSnapshotListener();

                } else {
                    try {
                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (error) {
                        console.error("Error during Firebase authentication:", error);
                        showNotification('ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ.');
                    }
                }
            });
        } else {
            console.error("Firebase config is missing. Falling back to initialData.");
            realData = initialData; // Fallback if Firebase config is not provided
            renderSlider();
            renderContent(realData);
            isAuthReady = true;
        }

        // --- DATA MANAGEMENT (Firestore) ---
        async function syncDataWithFirestore() {
            console.log(`Forcing data sync to version ${SCRIPT_DATA_VERSION}...`);
            const contentCollectionRef = collection(db, `artifacts/${appId}/public/data/arabflexContent`);
            const batch = writeBatch(db);
            try {
                initialData.forEach(item => {
                    const docRef = doc(contentCollectionRef, String(item.id));
                    const itemToSave = { ...item };
                    if (itemToSave.episodes && Array.isArray(itemToSave.episodes)) {
                        itemToSave.episodes = JSON.stringify(itemToSave.episodes);
                    }
                    batch.set(docRef, itemToSave);
                });
                
                await batch.commit();
                
                console.log("Firestore sync complete.");
                localStorage.setItem('arabflexDataVersion', SCRIPT_DATA_VERSION);
            } catch (error) {
                console.error("Error syncing data with Firestore:", error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.');
            }
        }

        function setupOnSnapshotListener() {
            if (!db) return;
            const contentCollectionRef = collection(db, `artifacts/${appId}/public/data/arabflexContent`);
            onSnapshot(contentCollectionRef, (snapshot) => {
                const fetchedData = [];
                snapshot.forEach(doc => {
                    const data = doc.data();
                    if (data.episodes && typeof data.episodes === 'string') {
                        try {
                            data.episodes = JSON.parse(data.episodes);
                        } catch(e) {
                            console.error("Failed to parse episodes for item:", data.id, e);
                            data.episodes = [];
                        }
                    }
                    fetchedData.push(data);
                });
                realData = fetchedData;
                renderSlider();
                renderContent(realData);
                console.log("Data loaded/updated from Firestore:", realData.length, "items");
            }, (error) => {
                console.error("Error fetching data from Firestore:", error);
                showNotification('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.');
            });
        }
      
        // --- MOBILE MENU ---
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        window.closeMobileMenu = function() {
            mobileMenu.classList.add('hidden');
        }

        // --- NOTIFICATION ---
        function showNotification(message) {
            clearTimeout(notificationTimeout);
            notificationMessage.textContent = message;
            notification.classList.remove('opacity-0', 'translate-y-10');
            notification.classList.add('opacity-100', 'translate-y-0');

            notificationTimeout = setTimeout(() => {
                notification.classList.remove('opacity-100', 'translate-y-0');
                notification.classList.add('opacity-0', 'translate-y-10');
            }, 3000);
        }

        // --- SLIDER LOGIC ---
        let currentSlide = 0;
        
        function renderSlider() {
            const sliderItems = [...realData].sort((a, b) => b.year - a.year).slice(0, 5);
            if (sliderItems.length === 0) {
                sliderContainer.innerHTML = `<div class="w-full h-full bg-dark-secondary flex items-center justify-center"><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰...</p></div>`;
                return;
            };
            sliderContainer.innerHTML = sliderItems.map((item, index) => `
                <div class="slider-item ${index === currentSlide ? 'opacity-100' : 'opacity-0 pointer-events-none'}" style="background-image: url('${item.poster}'); background-size: cover; background-position: top center;">
                    <div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent"></div>
                    <div class="absolute bottom-0 right-0 p-4 md:p-10 text-white">
                        <h2 class="text-2xl md:text-4xl font-bold">${item.title}</h2>
                        <p class="text-sm md:text-base text-gray-300">${item.genre} - ${item.year}</p>
                        <button data-id="${item.id}" class="slider-watch-btn mt-4 bg-amber-500 text-black font-bold py-2 px-6 rounded-full hover:bg-amber-600 transition duration-300 transform hover:scale-105">
                            <i class="fa fa-play ml-2"></i>Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù†
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function nextSlide() {
            const sliderItems = [...realData].sort((a, b) => b.year - a.year).slice(0, 5);
            if (sliderItems.length === 0) return;
            currentSlide = (currentSlide + 1) % sliderItems.length;
            renderSlider();
        }

        // --- RENDERING FUNCTIONS ---
        function createCard(item, index) {
            return `
                <div class="group cursor-pointer card-animate" style="animation-delay: ${index * 50}ms" onclick="showDetails(${item.id})">
                    <div class="relative rounded-lg overflow-hidden transform group-hover:-translate-y-2 transition-transform duration-300 shadow-lg bg-[#1e1e1e] border-transparent aurora-card">
                        <img src="${item.poster}" alt="${item.title}" class="w-full h-auto object-cover aspect-[2/3]" onerror="this.onerror=null;this.src='https://placehold.co/500x750/1e1e1e/f59e0b?text=Image+Not+Found';">
                        <div class="absolute inset-0 bg-black/70 flex flex-col justify-end p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-full group-hover:translate-y-0">
                               <h3 class="font-semibold text-white truncate">${item.title}</h3>
                               <div class="flex gap-2 mt-3">
                                 <button class="flex-1 bg-amber-500 text-black text-sm font-semibold py-1.5 px-3 rounded-md hover:bg-amber-600 transition duration-300">
                                     <i class="fa fa-play"></i> Ù…Ø´Ø§Ù‡Ø¯Ø©
                                 </button>
                                 <button onclick="startDownload(event)" class="flex-1 bg-gray-700 text-white text-sm font-semibold py-1.5 px-3 rounded-md hover:bg-gray-600 transition duration-300">
                                     <i class="fa fa-download"></i> ØªØ­Ù…ÙŠÙ„
                                 </button>
                            </div>
                        </div>
                        <div class="absolute top-2 left-2 bg-amber-500 text-black text-xs font-bold px-2 py-1 rounded-md">${item.rating} <i class="fa fa-star text-xs"></i></div>
                    </div>
                    <div class="pt-2">
                        <h3 class="font-semibold truncate text-white">${item.title}</h3>
                        <p class="text-sm text-gray-400">${item.year}</p>
                    </div>
                </div>
            `;
        }
        
        function createTopRatedItem(item) {
            return `
                <div class="flex items-center gap-3 group cursor-pointer p-2 rounded-md hover:bg-gray-800 transition-colors" onclick="showDetails(${item.id})">
                    <img src="${item.poster}" alt="${item.title}" class="w-16 h-24 object-cover rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/200x300/1e1e1e/f59e0b?text=N/A';">
                    <div>
                        <h4 class="font-semibold group-hover:text-amber-500 transition text-white">${item.title}</h4>
                        <p class="text-sm text-gray-400">${item.genre}</p>
                        <p class="text-sm text-amber-500"><i class="fa fa-star ml-1"></i>${item.rating}</p>
                    </div>
                </div>
            `;
        }

        function renderContent(data) {
            moviesGrid.innerHTML = data.filter(i => i.type === 'movie').map((item, i) => createCard(item, i)).join('');
            seriesGrid.innerHTML = data.filter(i => i.type === 'series').map((item, i) => createCard(item, i)).join('');
            
            const sortedByRating = [...data].sort((a, b) => b.rating - a.rating);
            topRatedList.innerHTML = sortedByRating.slice(0, 5).map(createTopRatedItem).join('');

            applyAuroraEffect();
        }

        window.startDownload = function(event) {
            event.preventDefault();
            event.stopPropagation();
            showNotification('Ø¬Ø§Ø±Ù Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„...');
        }
        
        // --- NAVIGATION & PAGE LOGIC ---
        window.smoothScrollTo = function(selector, event) {
            event.preventDefault();
            document.querySelector(selector).scrollIntoView({
                behavior: 'smooth'
            });
        }

        window.goHome = function(event) {
            if (event) event.preventDefault();
            if (!detailsPage.classList.contains('pointer-events-none')) {
                hideDetails();
            }
              if (!staticPage.classList.contains('pointer-events-none')) {
                hideStaticPage();
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.showRandomSuggestion = function() {
            if (realData.length > 0) {
                const randomIndex = Math.floor(Math.random() * realData.length);
                const randomItem = realData[randomIndex];
                showDetails(randomItem.id);
            } else {
                showNotification("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø­Ø§Ù„ÙŠÙ‹Ø§.");
            }
        }
        
        window.showDetails = function(id) {
            const item = realData.find(i => i.id === id);
            if (!item) return;
            
            let actionSectionHtml = '';
            let aiCriticHtml = item.ai_critic_quote ? `
                <div class="mt-8 p-4 bg-black/20 backdrop-blur-sm rounded-lg border border-amber-500/30">
                    <h3 class="text-xl font-semibold mb-3 flex items-center gap-2 text-amber-400">
                        <i class="fa-solid fa-brain"></i>
                        <span>Ø±Ø£ÙŠ Ø§Ù„Ù†Ø§Ù‚Ø¯ Ø§Ù„Ø°ÙƒÙŠ</span>
                    </h3>
                    <p class="text-gray-300 italic">"${item.ai_critic_quote}"</p>
                </div>` : '';

            if (item.type === 'series' && item.episodes) {
                actionSectionHtml = `
                    <div class="mt-8">
                        <h3 class="text-2xl font-semibold border-r-4 border-amber-500 pr-4 mb-4">Ù…Ø´Ø§Ù‡Ø¯Ø©</h3>
                        <div class="flex flex-wrap gap-3 mb-4">
                            <button onclick="playVideo('${item.videoSrc}')" class="bg-white/10 py-2 px-5 rounded-lg hover:bg-amber-500 hover:text-black transition transform hover:scale-105 backdrop-blur-sm"><i class="fa-solid fa-clapperboard ml-2"></i>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
                        </div>
                    </div>
                       <div class="mt-8">
                        <h3 class="text-2xl font-semibold border-r-4 border-amber-500 pr-4 mb-4">Ø§Ù„Ø­Ù„Ù‚Ø§Øª</h3>
                        <div class="episode-list grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-2 max-h-60 overflow-y-auto pr-2">
                            ${item.episodes.map(ep => `
                                <button onclick="playVideo('${ep.videoSrc}')" class="text-white bg-white/10 text-center py-2 px-1 rounded-lg hover:bg-amber-500 hover:text-black transition duration-300 focus:outline-none focus:ring-2 focus:ring-amber-500 transform hover:scale-110">
                                    ${ep.number}
                                </button>
                            `).join('')}
                        </div>
                    </div>`;
            } else { // It's a movie
                let watchButtonsHtml = `<button onclick="playVideo('${item.videoSrc}')" class="bg-white/10 py-2 px-5 rounded-lg hover:bg-amber-500 hover:text-black transition transform hover:scale-105 backdrop-blur-sm shadow-lg shadow-amber-500/10 hover:shadow-amber-500/30"><i class="fa-solid fa-play ml-2"></i>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ø±Ø³Ù…ÙŠ</button>`;

                if (item.externalWatchLink) {
                    watchButtonsHtml += `<button onclick="playVideo('${item.externalWatchLink}')" class="bg-gradient-to-br from-amber-500 to-amber-600 text-black font-bold py-2 px-5 rounded-lg hover:from-amber-600 hover:to-amber-700 transition transform hover:scale-105 backdrop-blur-sm shadow-lg shadow-amber-500/30 hover:shadow-amber-500/50"><i class="fa-solid fa-film ml-2"></i>Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ÙÙŠÙ„Ù…</button>`;
                }

                actionSectionHtml = `
                    <div class="mt-8">
                        <h3 class="text-2xl font-semibold border-r-4 border-amber-500 pr-4 mb-4">Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù†</h3>
                        <div class="flex flex-wrap gap-3">
                            ${watchButtonsHtml}
                        </div>
                    </div>
                    <div class="mt-8">
                        <h3 class="text-2xl font-semibold border-r-4 border-amber-500 pr-4 mb-4">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„</h3>
                        <div class="space-y-3">
                            <a href="#" onclick="startDownload(event)" class="flex justify-between items-center p-3 bg-white/10 rounded-lg hover:bg-white/20 transition backdrop-blur-sm"><span>ØªØ­Ù…ÙŠÙ„ Ø¨Ø¬ÙˆØ¯Ø© 1080p</span><i class="fa fa-download"></i></a>
                            <a href="#" onclick="startDownload(event)" class="flex justify-between items-center p-3 bg-white/10 rounded-lg hover:bg-white/20 transition backdrop-blur-sm"><span>ØªØ­Ù…ÙŠÙ„ Ø¨Ø¬ÙˆØ¯Ø© 720p</span><i class="fa fa-download"></i></a>
                        </div>
                    </div>`;
            }

            detailsPage.innerHTML = `
                <button onclick="hideDetails()" class="fixed top-6 left-6 z-[70] text-2xl bg-black/50 w-10 h-10 rounded-full hover:bg-amber-500 hover:text-black transition-all duration-300 flex items-center justify-center">
                    <i class="fa fa-arrow-left"></i>
                </button>
                <div class="min-h-screen py-10 md:py-20 details-backdrop" style="background-image: url('${item.poster}');">
                    <div class="container mx-auto px-4 z-10 relative">
                        <div class="flex flex-col md:flex-row gap-8">
                            <div class="md:w-1/3 flex-shrink-0">
                                <img src="${item.poster}" alt="${item.title}" class="rounded-xl shadow-2xl shadow-black/50 w-full" onerror="this.onerror=null;this.src='https://placehold.co/500x750/1e1e1e/f59e0b?text=Image+Not+Found';">
                            </div>
                            <div class="md:w-2/3 text-white">
                                <div id="player-wrapper" class="hidden mb-6 bg-black rounded-lg overflow-hidden shadow-lg aspect-video">
                                    <!-- Player (video or iframe) will be injected here -->
                                </div>
                                <h2 class="text-4xl lg:text-5xl font-bold">${item.title} (${item.year})</h2>
                                <div class="flex items-center gap-4 my-4 text-gray-300">
                                    <span>${item.genre}</span>
                                    <span class="w-1 h-1 bg-gray-400 rounded-full"></span>
                                    <span class="text-amber-500 font-bold text-lg"><i class="fa fa-star ml-1"></i>${item.rating} / 10</span>
                                </div>
                                <p class="leading-relaxed text-gray-200">${item.description}</p>
                                ${aiCriticHtml}
                                ${actionSectionHtml}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            detailsPage.classList.remove('hidden', 'pointer-events-none', 'opacity-0');
            document.body.style.overflow = 'hidden'; 
        }
        
        function getYouTubeID(url){
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function getDailymotionID(url) {
            const m = url.match(/^.+dailymotion.com\/(video|hub|player.html)\?video=([^_?]+)/) || url.match(/dai.ly\/([^_?]+)/) || url.match(/^https:\/\/geo\.dailymotion\.com\/player\.html\?video=([^_?]+)/);
            return m ? m[m.length - 1] : null;
        }

        window.playVideo = function(src) {
            const playerWrapper = document.getElementById('player-wrapper');
            if (!playerWrapper) return;

            // Destroy previous HLS instance if it exists
            if (hlsInstance) {
                hlsInstance.destroy();
                hlsInstance = null;
            }

            playerWrapper.innerHTML = ''; // Clear previous content
            playerWrapper.classList.remove('aspect-video');
            
            const youtubeId = getYouTubeID(src);
            const dailymotionId = getDailymotionID(src);

            if (youtubeId) {
                playerWrapper.classList.add('aspect-video');
                playerWrapper.innerHTML = `<iframe class="w-full h-full" src="https://www.youtube.com/embed/${youtubeId}?autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>`;
            } else if (dailymotionId) {
                playerWrapper.classList.add('aspect-video');
                playerWrapper.innerHTML = `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;">
                    <iframe src="https://geo.dailymotion.com/player.html?video=${dailymotionId}&autoplay=1"
                    style="width:100%; height:100%; position:absolute; left:0px; top:0px; overflow:hidden; border:none;"
                    allow="autoplay; fullscreen; web-share" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true">
                    </iframe></div>`;
            } else if (src.includes('.m3u8')) {
                playerWrapper.classList.add('aspect-video');
                const video = document.createElement('video');
                video.id = 'video-player';
                video.className = 'w-full h-full';
                video.controls = true;
                video.autoplay = true;
                video.setAttribute('playsinline', ''); // Add playsinline for iOS fullscreen
                playerWrapper.appendChild(video);

                if (Hls.isSupported()) {
                    hlsInstance = new Hls();
                    hlsInstance.loadSource(src);
                    hlsInstance.attachMedia(video);
                    hlsInstance.on(Hls.Events.MANIFEST_PARSED, function() {
                        video.play();
                    });
                } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                    video.src = src;
                    video.addEventListener('loadedmetadata', function() {
                        video.play();
                    });
                }
            } else { // MP4 or other direct video
                playerWrapper.classList.add('aspect-video');
                playerWrapper.innerHTML = `<video id="video-player" class="w-full h-full" controls autoplay allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"><source src="${src}" type="video/mp4">Your browser does not support the video tag.</video>`;
            }

            playerWrapper.classList.remove('hidden');
            playerWrapper.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        window.hideDetails = function() {
            // Destroy HLS instance on closing details page
            if (hlsInstance) {
                hlsInstance.destroy();
                hlsInstance = null;
            }
            detailsPage.classList.add('opacity-0');
            setTimeout(() => {
                detailsPage.classList.add('pointer-events-none', 'hidden');
                const playerWrapper = document.getElementById('player-wrapper');
                if (playerWrapper) {
                    playerWrapper.innerHTML = '';
                    playerWrapper.classList.add('hidden');
                }
                 if (document.fullscreenElement) {
                    document.exitFullscreen();
                }
            }, 300);
            document.body.style.overflow = '';
        }

        // --- STATIC PAGE LOGIC ---
        const staticContent = {
            'about': {
                title: 'Ø¹Ù† Ø¹Ø±Ø¨ ÙÙ„ÙŠÙƒØ³',
                content: 'Ø¹Ø±Ø¨ ÙÙ„ÙŠÙƒØ³ Ù‡Ùˆ ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© ÙˆØªØ­Ù…ÙŠÙ„ Ø£Ø­Ø¯Ø« ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©. Ù†Ø³Ø¹Ù‰ Ù„ØªÙ‚Ø¯ÙŠÙ… ØªØ¬Ø±Ø¨Ø© Ù…Ø´Ø§Ù‡Ø¯Ø© Ù…Ù…ØªØ¹Ø© ÙˆØ³Ù„Ø³Ø© Ù„Ø¬Ù…ÙŠØ¹ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†Ø§ØŒ Ù…Ø¹ Ù…ÙƒØªØ¨Ø© Ø¶Ø®Ù…Ø© Ù…Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ØªØ¬Ø¯Ø¯ Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±. ØªØµÙ…ÙŠÙ…Ù†Ø§ ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ³Ø±Ø¹Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ ØªØ­Ø¨Ù‡.'
            },
            'contact': {
                title: 'Ø§ØªØµÙ„ Ø¨Ù†Ø§',
                content: 'Ù†Ø­Ù† Ù†Ø±Ø­Ø¨ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø¨Ø¢Ø±Ø§Ø¦ÙƒÙ… ÙˆØ§Ù‚ØªØ±Ø§Ø­Ø§ØªÙƒÙ…. Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´ÙƒÙ„Ø© Ø£Ùˆ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø±ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ: <br> <a href="mailto:arabfleex@gmail.com" class="text-amber-500">arabfleex@gmail.com</a>'
            },
            'policy': {
                title: 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©',
                content: 'Ù…ÙˆÙ‚Ø¹ Ø¹Ø±Ø¨ ÙÙ„ÙŠÙƒØ³ Ù‡Ùˆ ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¶ Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¬Ø±ÙŠØ¨ÙŠØ© ÙˆØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© Ù‡ÙŠ Ù…Ø¬Ø±Ø¯ Ù…Ø­Ø§ÙƒØ§Ø© ÙˆÙ„Ø§ ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø­ØªÙˆÙ‰ Ø­Ù‚ÙŠÙ‚ÙŠ Ù…Ù‚Ø±ØµÙ†. Ù†Ø­Ù† Ù„Ø§ Ù†Ø³ØªØ¶ÙŠÙ Ø£ÙŠ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø¹Ù„Ù‰ Ø®ÙˆØ§Ø¯Ù…Ù†Ø§. Ù†Ø­Ù† Ù†Ø­ØªØ±Ù… Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø§Ù„ÙÙƒØ±ÙŠØ© ÙˆÙ†Ø¯Ø¹Ùˆ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†Ø§ Ù„Ø§Ø­ØªØ±Ø§Ù…Ù‡Ø§ Ø£ÙŠØ¶Ù‹Ø§. Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙŠØ¹Ù†ÙŠ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ·.'
            }
        };

        window.showStaticPage = function(pageKey, event) {
            event.preventDefault();
            const pageData = staticContent[pageKey];
            if (!pageData) return;

            staticPage.innerHTML = `
                <div class="bg-[#1e1e1e] rounded-lg shadow-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto p-6 md:p-8 relative transform transition-all duration-300 scale-95 opacity-0" id="static-content-box">
                    <button onclick="hideStaticPage()" class="absolute top-4 left-4 text-2xl text-gray-400 hover:text-white transition-colors">
                        <i class="fa fa-times"></i>
                    </button>
                    <h2 class="text-3xl font-bold text-amber-500 mb-6">${pageData.title}</h2>
                    <div class="text-gray-300 leading-relaxed space-y-4">
                       <p>${pageData.content}</p>
                    </div>
                </div>
            `;
            staticPage.classList.remove('hidden', 'pointer-events-none', 'opacity-0');
            document.body.style.overflow = 'hidden';
            setTimeout(() => {
                document.getElementById('static-content-box').classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        window.hideStaticPage = function() {
            const contentBox = document.getElementById('static-content-box');
            if (contentBox) {
                contentBox.classList.add('scale-95', 'opacity-0');
            }
            staticPage.classList.add('opacity-0');
            setTimeout(() => {
                staticPage.classList.add('pointer-events-none', 'hidden');
            }, 300);
            document.body.style.overflow = '';
        }

        // --- SEARCH/FILTER LOGIC ---
        searchInput.addEventListener('keyup', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();
            const filteredData = realData.filter(item => 
                item.title.toLowerCase().includes(searchTerm)
            );
            renderContent(filteredData);
        });

        // --- AURORA EFFECT ---
        function applyAuroraEffect() {
            const cards = document.querySelectorAll('.aurora-card');
            cards.forEach(card => {
                card.addEventListener('mousemove', e => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    card.style.setProperty('--x', `${x}px`);
                    card.style.setProperty('--y', `${y}px`);
                });
            });
        }
        
        // --- MOOD SELECTOR ---
        moodSelector.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                const genre = e.target.dataset.genre;
                
                document.querySelectorAll('.mood-selector button').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');

                if (genre === 'all') {
                    renderContent(realData);
                } else {
                    const filteredData = realData.filter(item => item.genre.includes(genre));
                    renderContent(filteredData);
                }
            }
        });


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Construction Banner Logic
            if (localStorage.getItem('arabflexBannerClosed') === 'true') {
                constructionBanner.classList.add('hidden');
            }
            closeBannerBtn.addEventListener('click', () => {
                constructionBanner.classList.add('hidden');
                localStorage.setItem('arabflexBannerClosed', 'true');
            });

            // Slider click event listener
            sliderContainer.addEventListener('click', (event) => {
                const watchButton = event.target.closest('.slider-watch-btn');
                if (watchButton) {
                    const id = parseInt(watchButton.dataset.id, 10);
                    if (!isNaN(id)) {
                        showDetails(id);
                    }
                }
            });
            // Start the slider interval only after initial data is loaded
            setInterval(nextSlide, 5000);
        });

    </script>
</body>
</html>

